<!doctype html><html><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns#"><title>Buck: android_binary()</title><link type="image/png" rel="icon" href="/buck/favicon.png" /><meta http-equiv="content-type" content="text/html;charset=utf-8"><link type="text/css" rel="stylesheet" href="/buck/google-code-prettify/prettify.css" ><link type="text/css" rel="stylesheet" href="/buck/buck.css"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-40185670-1', 'github.io'); ga('send', 'pageview');</script><meta property="og:locale" content="en_US"><meta property="og:title" content="android_binary()"><meta property="og:site_name" content="Buck: an Android build tool"><meta property="og:image" content="http://newsroom.fb.com/display-media/265/4"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="690"><meta property="og:image:height" content="690"><meta property="og:type" content="article"><meta property="fb:admins" content="584556688222168"></head><body><a href="https://github.com/facebook/buck"><img id="fork" src="/buck/fork_me.png" alt="Fork me on GitHub"></a><div id="fb-root"></div><script>(function(d, s, id) {var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=584556688222168"; fjs.parentNode.insertBefore(js, fjs);}(document, 'script', 'facebook-jssdk'));</script><h1><div class="titlebar"><div class="fb-like buck_like" data-send="false" data-layout="standard" data-width="350" data-show-faces="false" data-colorscheme="light" data-action="like"></div><div>Buck: android_binary()</div></div></h1><div class="content_frame"><div class="toc"><ul class="toc_root"><li><span class="toc_header">Getting Started</span><ul><li><a href="/buck/">Overview</a><li><a href="/buck/setup/quickstart.html">Quick Start</a><li><a href="/buck/setup/install.html">Downloading and Installing Buck</a></ul><li><span class="toc_header">Concepts</span><ul><li><a href="/buck/concept/build_rule.html">Build Rule</a><li><a href="/buck/concept/build_target.html">Build Target</a><li><a href="/buck/concept/build_file.html">Build File</a><li><a href="/buck/concept/buckversion.html">.buckversion</a><li><a href="/buck/concept/nobuckcheck.html">.nobuckcheck</a><li><a href="/buck/concept/buckconfig.html">.buckconfig</a><li><a href="/buck/concept/build_target_pattern.html">Build Target Pattern</a><li><a href="/buck/concept/visibility.html">Visibility</a><li><a href="/buck/concept/troubleshooting.html">Troubleshooting</a><li><a href="/buck/concept/faq.html">FAQ</a></ul><li><span class="toc_header">Build Rules</span><ul><li><a href="/buck/rule/android_binary.html">android_binary()</a><li><a href="/buck/rule/android_library.html">android_library()</a><li><a href="/buck/rule/android_resource.html">android_resource()</a><li><a href="/buck/rule/apk_genrule.html">apk_genrule()</a><li><a href="/buck/rule/gen_aidl.html">gen_aidl()</a><li><a href="/buck/rule/genrule.html">genrule()</a><li><a href="/buck/rule/java_binary.html">java_binary()</a><li><a href="/buck/rule/java_library.html">java_library()</a><li><a href="/buck/rule/java_test.html">java_test()</a><li><a href="/buck/rule/keystore.html">keystore()</a><li><a href="/buck/rule/ndk_library.html">ndk_library()</a><li><a href="/buck/rule/prebuilt_jar.html">prebuilt_jar()</a><li><a href="/buck/rule/prebuilt_native_library.html">prebuilt_native_library()</a><li><a href="/buck/rule/project_config.html">project_config()</a></ul><li><span class="toc_header">Functions</span><ul><li><a href="/buck/function/genfile.html">genfile()</a><li><a href="/buck/function/glob.html">glob()</a><li><a href="/buck/function/include_defs.html">include_defs()</a></ul><li><span class="toc_header">Commands</span><ul><li><a href="/buck/command/audit.html">buck audit</a><li><a href="/buck/command/build.html">buck build</a><li><a href="/buck/command/clean.html">buck clean</a><li><a href="/buck/command/install.html">buck install</a><li><a href="/buck/command/project.html">buck project</a><li><a href="/buck/command/targets.html">buck targets</a><li><a href="/buck/command/test.html">buck test</a><li><a href="/buck/command/uninstall.html">buck uninstall</a><li><a href="/buck/command/buckd.html">buckd</a></ul><li><span class="toc_header">Extending Buck</span><ul><li><a href="/buck/extending/macros.html">Custom Macros</a><li><a href="/buck/extending/rules.html">Custom Rules</a></ul><li><span class="toc_header">Contributing to Buck</span><ul><li><a href="https://groups.google.com/group/buck-build">Discussion Group</a><li><a href="https://github.com/facebook/buck/issues/new">Report a Bug</a><li><a href="/buck/contributing/development.html">Development Workflow</a><li><a href="/buck/contributing/codestyle.html">Code Style</a><li><a href="/buck/javadoc">API</a><li><a href="https://github.com/facebook/buck">Browse the Source Code</a></ul></ul></div><div class="content"><div class="overview">An <code>android_binary()</code> rule is used to generate an Android APK.<h2>Arguments</h2><ul class="arglist"><li class="arg"><code>name</code> (required) The name of the rule, as well as the name of the APK generated by this rule.<li class="arg"><code>manifest</code> (required) Relative path to the Android manifest for the APK. The common case is that the manifest will be in the same directory as the <code>android_binary()</code>, in which case this will simply be <code>'AndroidManifest.xml'</code>.<li class="arg"><code>target</code> (required) The version of Android being targeted by this APK. In a traditional Android project, this would be specified in the <code>project.properties</code> file. This is frequently something like <code>'Google Inc.:Google APIs:16'</code>.<li class="arg"><code>keystore</code> (required) A build target that identifies a <a href="/buck/rule/keystore.html"><code>keystore</code></a> to use to sign the APK. See <a href="/buck/setup/quickstart.html">Quick Start</a> for more details.<li class="arg"><code>package_type</code> (defaults to <code>&#39;debug&#39;</code>) Determines whether ProGuard will be used when packaging the APK. Acceptable values for <code>package_type</code> are <code>'debug'</code> and<code>'release'</code>. The default value is <code>'debug'</code>, which indicates that ProGuard should not be used.<p><strong>Note:</strong> This argument will be renamed to reflect that it determines the use of ProGuard.<li class="arg"><code>proguard_config</code> (defaults to <code>None</code>) Relative path to a ProGuard configuration file that will be passed via the <code>-include</code> flag when <code>package_type</code> is <code>'release'</code>.<li class="arg"><code>no_dx</code> (defaults to <code>[]</code>) List of build targets that may have been included during compilation of  the transitive <code>android_library()</code> and <code>java_library()</code> dependencies, but should not be included in the <code>classes.dex</code> for generated for the APK.<p><strong>Note:</strong> This argument will be changed to accept a list of build targets.<li class="arg"><code>deps</code> (defaults to <code>[]</code>) List of build targets whose corresponding compiled Java code, Android resources, and native libraries will be included in the APK. From the transitive closure of these dependencies, the outputs of rules of the following type will be included in the APK:<ul><li><code>android_library()</code><li><code>android_resource()</code><li><code>java_library()</code><li><code>java_binary()</code><li><code>prebuilt_jar()</code><li><code>ndk_library()</code><li><code>prebuilt_native_library()</code></ul><li class="arg"><code>visibility</code> (defaults to <code>[]</code>) List of <a href="/buck/concept/build_target_pattern.html">build target patterns</a> that identify the build rules that can include this rule in its <code>deps</code>.</ul><h2>Examples</h2>Here is an example of an <code>android_binary()</code> rule that includes Android resources from one dependency and compiled Java code from another dependency:<pre class="prettyprint lang-py">
android_resource(
  name = 'res',
  res = 'res',
  assets = 'assets',
)

android_library(
  name = 'src',
  srcs = glob(['src/**/*.java']),
  deps = [
    ':res',
  ],
)

# Building this rule will produce a file named messenger.apk.
android_binary(
  name = 'messenger',
  manifest = 'AndroidManifest.xml',
  target = 'Google Inc.:Google APIs:16',
  keystore = '//keystores:prod',
  package_type = 'release',
  proguard_config = 'proguard.cfg',
  deps = [
    ':res',
    ':src',
  ],
)
</pre></div></div></div><script src="/buck/google-code-prettify/prettify.js"></script><script>prettyPrint()</script></body></html>